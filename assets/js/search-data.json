{
  
    
        "post0": {
            "title": "Data handling in R",
            "content": "tag :R for data science . library(&#39;tidyverse&#39;) library(&#39;nycflights13&#39;) #2013년 뉴욕시 출발 항공편 정보 패키지 . flights %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 227 | 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 160 | 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 183 | 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 116 | 762 | 6 | 0 | 2013-01-01 06:00:00 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 150 | 719 | 5 | 58 | 2013-01-01 05:00:00 | . dttm는 데이트-타임형(날짜 + 시간) 의미 . filter(flights, month == 1, day == 1) %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 227 | 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 160 | 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 183 | 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 116 | 762 | 6 | 0 | 2013-01-01 06:00:00 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 150 | 719 | 5 | 58 | 2013-01-01 05:00:00 | . near(sqrt(2) ^2, 2) . TRUE filter( flights, month == 11 | month == 12) %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 11 | 1 | 5 | 2359 | 6 | 352 | 345 | 7 | B6 | 745 | N568JB | JFK | PSE | 205 | 1617 | 23 | 59 | 2013-11-01 23:00:00 | . 2013 | 11 | 1 | 35 | 2250 | 105 | 123 | 2356 | 87 | B6 | 1816 | N353JB | JFK | SYR | 36 | 209 | 22 | 50 | 2013-11-01 22:00:00 | . 2013 | 11 | 1 | 455 | 500 | -5 | 641 | 651 | -10 | US | 1895 | N192UW | EWR | CLT | 88 | 529 | 5 | 0 | 2013-11-01 05:00:00 | . 2013 | 11 | 1 | 539 | 545 | -6 | 856 | 827 | 29 | UA | 1714 | N38727 | LGA | IAH | 229 | 1416 | 5 | 45 | 2013-11-01 05:00:00 | . 2013 | 11 | 1 | 542 | 545 | -3 | 831 | 855 | -24 | AA | 2243 | N5CLAA | JFK | MIA | 147 | 1089 | 5 | 45 | 2013-11-01 05:00:00 | . 2013 | 11 | 1 | 549 | 600 | -11 | 912 | 923 | -11 | UA | 303 | N595UA | JFK | SFO | 359 | 2586 | 6 | 0 | 2013-11-01 06:00:00 | . %in% : 이 안에 있는 모든 것 꺼냄 . nov_dec &lt;- filter(flights, month %in% c(11,12)) nov_dec %&gt;% tail . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 12 | 31 | NA | 855 | NA | NA | 1142 | NA | UA | 1506 | NA | EWR | JAC | NA | 1874 | 8 | 55 | 2013-12-31 08:00:00 | . 2013 | 12 | 31 | NA | 705 | NA | NA | 931 | NA | UA | 1729 | NA | EWR | DEN | NA | 1605 | 7 | 5 | 2013-12-31 07:00:00 | . 2013 | 12 | 31 | NA | 825 | NA | NA | 1029 | NA | US | 1831 | NA | JFK | CLT | NA | 541 | 8 | 25 | 2013-12-31 08:00:00 | . 2013 | 12 | 31 | NA | 1615 | NA | NA | 1800 | NA | MQ | 3301 | N844MQ | LGA | RDU | NA | 431 | 16 | 15 | 2013-12-31 16:00:00 | . 2013 | 12 | 31 | NA | 600 | NA | NA | 735 | NA | UA | 219 | NA | EWR | ORD | NA | 719 | 6 | 0 | 2013-12-31 06:00:00 | . 2013 | 12 | 31 | NA | 830 | NA | NA | 1154 | NA | UA | 443 | NA | JFK | LAX | NA | 2475 | 8 | 30 | 2013-12-31 08:00:00 | . filter(flights, !(arr_delay &gt; 120 | dep_delay &gt; 120)) %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 227 | 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 160 | 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 183 | 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 116 | 762 | 6 | 0 | 2013-01-01 06:00:00 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 150 | 719 | 5 | 58 | 2013-01-01 05:00:00 | . df &lt;- tibble(x = c(1, NA, 3)) . df . A tibble: 3 × 1 x . &lt;dbl&gt; . 1 | . NA | . 3 | . filter(df, x &gt;1) . A tibble: 1 × 1 x . &lt;dbl&gt; . 3 | . arrange : desc와 같이 정렬할 때 사용하는 filter . arrange(flights, desc(arr_delay)) %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 9 | 641 | 900 | 1301 | 1242 | 1530 | 1272 | HA | 51 | N384HA | JFK | HNL | 640 | 4983 | 9 | 0 | 2013-01-09 09:00:00 | . 2013 | 6 | 15 | 1432 | 1935 | 1137 | 1607 | 2120 | 1127 | MQ | 3535 | N504MQ | JFK | CMH | 74 | 483 | 19 | 35 | 2013-06-15 19:00:00 | . 2013 | 1 | 10 | 1121 | 1635 | 1126 | 1239 | 1810 | 1109 | MQ | 3695 | N517MQ | EWR | ORD | 111 | 719 | 16 | 35 | 2013-01-10 16:00:00 | . 2013 | 9 | 20 | 1139 | 1845 | 1014 | 1457 | 2210 | 1007 | AA | 177 | N338AA | JFK | SFO | 354 | 2586 | 18 | 45 | 2013-09-20 18:00:00 | . 2013 | 7 | 22 | 845 | 1600 | 1005 | 1044 | 1815 | 989 | MQ | 3075 | N665MQ | JFK | CVG | 96 | 589 | 16 | 0 | 2013-07-22 16:00:00 | . 2013 | 4 | 10 | 1100 | 1900 | 960 | 1342 | 2211 | 931 | DL | 2391 | N959DL | JFK | TPA | 139 | 1005 | 19 | 0 | 2013-04-10 19:00:00 | . df &lt;- tibble(x = c(5,2, NA)) arrange(df, x) . A tibble: 3 × 1 x . &lt;dbl&gt; . 2 | . 5 | . NA | . select : 관심 있는 열만 보기 . select(flights, year, month, day) %&gt;% head . A tibble: 6 × 3 yearmonthday . &lt;int&gt;&lt;int&gt;&lt;int&gt; . 2013 | 1 | 1 | . 2013 | 1 | 1 | . 2013 | 1 | 1 | . 2013 | 1 | 1 | . 2013 | 1 | 1 | . 2013 | 1 | 1 | . : a ~ b까지 . select(flights, year:arr_delay) %&gt;% head . A tibble: 6 × 9 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delay . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | . select(flights, -(year:air_time)) %&gt;% head . A tibble: 6 × 4 distancehourminutetime_hour . &lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 762 | 6 | 0 | 2013-01-01 06:00:00 | . 719 | 5 | 58 | 2013-01-01 05:00:00 | . - 추가 . select() 안에서 사용할 수 있는 함수들 . starts_with(&#39;abc&#39;) :&#39;abc&#39;로 시작하는 이름에 매칭 - ends_with(&quot;xyz&quot;) : &#39;xyz&#39;로 끝나는 이름에 매칭 | contains(&#39;abc&#39;) : &#39;abc&#39;를 포함한 이름에 매칭 | num_range(&#39;x&#39;, 1:3) : x1,x2,x3에 매칭 | . rename : 변수명 변경 . rename(flights, tail_num = tailnum) %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttail_numorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 227 | 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 160 | 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 183 | 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 116 | 762 | 6 | 0 | 2013-01-01 06:00:00 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 150 | 719 | 5 | 58 | 2013-01-01 05:00:00 | . everything: 몇 개의 변수를 데이터프레임 시작 부분으로 옮기고 싶을 때 사용 . select(flights, time_hour, air_time, everything()) %&gt;% head . A tibble: 6 × 19 time_hourair_timeyearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestdistancehourminute . &lt;dttm&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt; . 2013-01-01 05:00:00 | 227 | 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 1400 | 5 | 15 | . 2013-01-01 05:00:00 | 227 | 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 1416 | 5 | 29 | . 2013-01-01 05:00:00 | 160 | 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 1089 | 5 | 40 | . 2013-01-01 05:00:00 | 183 | 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 1576 | 5 | 45 | . 2013-01-01 06:00:00 | 116 | 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 762 | 6 | 0 | . 2013-01-01 05:00:00 | 150 | 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 719 | 5 | 58 | . flights_sml &lt;- select(flights, year:day, ends_with(&#39;delay&#39;), distance, air_time ) . mutate : 새로운 변수 데이터셋 마지막에 추가 . mutate(flights_sml, gain = arr_delay - dep_delay, speed = distance / air_time * 60) %&gt;% head . A tibble: 6 × 9 yearmonthdaydep_delayarr_delaydistanceair_timegainspeed . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 2 | 11 | 1400 | 227 | 9 | 370.0441 | . 2013 | 1 | 1 | 4 | 20 | 1416 | 227 | 16 | 374.2731 | . 2013 | 1 | 1 | 2 | 33 | 1089 | 160 | 31 | 408.3750 | . 2013 | 1 | 1 | -1 | -18 | 1576 | 183 | -17 | 516.7213 | . 2013 | 1 | 1 | -6 | -25 | 762 | 116 | -19 | 394.1379 | . 2013 | 1 | 1 | -4 | 12 | 719 | 150 | 16 | 287.6000 | . transmute : mutate에서 새 변수만 남기기 . transmute(flights, gain = arr_delay - dep_delay, hours = air_time / 60, gain_per_hour = gain / hour) %&gt;% head . A tibble: 6 × 3 gainhoursgain_per_hour . &lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt; . 9 | 3.783333 | 1.800000 | . 16 | 3.783333 | 3.200000 | . 31 | 2.666667 | 6.200000 | . -17 | 3.050000 | -3.400000 | . -19 | 1.933333 | -3.166667 | . 16 | 2.500000 | 3.200000 | . %/% : 나누고 정수만 표기 %% : 나머지 lag : 한 칸 밀기 lead : 한 칸 당기기 . x &lt;- 1:10 lag(x) lead(x) . &lt;ol class=list-inline&gt;&lt;NA&gt; | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | &lt;/ol&gt; &lt;ol class=list-inline&gt;2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | &lt;NA&gt; | &lt;/ol&gt; cumsum : 누적 합 cummean : 누적 평균 . cumsum(x) . &lt;ol class=list-inline&gt;1 | 3 | 6 | 10 | 15 | 21 | 28 | 36 | 45 | 55 | &lt;/ol&gt; cummean(x) . &lt;ol class=list-inline&gt;1 | 1.5 | 2 | 2.5 | 3 | 3.5 | 4 | 4.5 | 5 | 5.5 | &lt;/ol&gt; 6. summarize&#47196; &#44536;&#47353;&#54868; &#50836;&#50557; . summarize(flights, delay = mean(dep_delay, na.rm = TRUE)) . A tibble: 1 × 1 delay . &lt;dbl&gt; . 12.63907 | . summarise는 group_by와 함께 써야 유용 | . by_day &lt;- group_by(flights, year, month, day) . summarize(by_day, delay = mean(dep_delay, na.rm = TRUE)) . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 365 × 4 yearmonthdaydelay . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 11.548926 | . 2013 | 1 | 2 | 13.858824 | . 2013 | 1 | 3 | 10.987832 | . 2013 | 1 | 4 | 8.951595 | . 2013 | 1 | 5 | 5.732218 | . 2013 | 1 | 6 | 7.148014 | . 2013 | 1 | 7 | 5.417204 | . 2013 | 1 | 8 | 2.553073 | . 2013 | 1 | 9 | 2.276477 | . 2013 | 1 | 10 | 2.844995 | . 2013 | 1 | 11 | 2.817193 | . 2013 | 1 | 12 | 1.596491 | . 2013 | 1 | 13 | 19.873153 | . 2013 | 1 | 14 | 2.792657 | . 2013 | 1 | 15 | 0.123723 | . 2013 | 1 | 16 | 24.612865 | . 2013 | 1 | 17 | 7.648148 | . 2013 | 1 | 18 | 6.765864 | . 2013 | 1 | 19 | 3.475483 | . 2013 | 1 | 20 | 6.783887 | . 2013 | 1 | 21 | 7.831858 | . 2013 | 1 | 22 | 12.499435 | . 2013 | 1 | 23 | 10.610360 | . 2013 | 1 | 24 | 19.465423 | . 2013 | 1 | 25 | 21.898534 | . 2013 | 1 | 26 | 7.213115 | . 2013 | 1 | 27 | 8.377943 | . 2013 | 1 | 28 | 15.138533 | . 2013 | 1 | 29 | 2.497149 | . 2013 | 1 | 30 | 28.623441 | . ⋮ | ⋮ | ⋮ | ⋮ | . 2013 | 12 | 2 | 9.021978 | . 2013 | 12 | 3 | 5.975258 | . 2013 | 12 | 4 | 5.366316 | . 2013 | 12 | 5 | 52.327990 | . 2013 | 12 | 6 | 16.134509 | . 2013 | 12 | 7 | 4.860327 | . 2013 | 12 | 8 | 21.515337 | . 2013 | 12 | 9 | 34.800221 | . 2013 | 12 | 10 | 26.465494 | . 2013 | 12 | 11 | 7.058263 | . 2013 | 12 | 12 | 7.527518 | . 2013 | 12 | 13 | 5.256995 | . 2013 | 12 | 14 | 28.361552 | . 2013 | 12 | 15 | 19.573871 | . 2013 | 12 | 16 | 11.741127 | . 2013 | 12 | 17 | 40.705602 | . 2013 | 12 | 18 | 14.008395 | . 2013 | 12 | 19 | 16.372165 | . 2013 | 12 | 20 | 17.266254 | . 2013 | 12 | 21 | 20.344956 | . 2013 | 12 | 22 | 29.239865 | . 2013 | 12 | 23 | 32.254149 | . 2013 | 12 | 24 | 6.765957 | . 2013 | 12 | 25 | 7.552448 | . 2013 | 12 | 26 | 14.417204 | . 2013 | 12 | 27 | 10.937630 | . 2013 | 12 | 28 | 7.981550 | . 2013 | 12 | 29 | 22.309551 | . 2013 | 12 | 30 | 10.698113 | . 2013 | 12 | 31 | 6.996053 | . by_dest &lt;- group_by(flights, dest) delay &lt;- summarize(by_dest, count = n(), dist = mean(distance, na.rm = TRUE), delay = mean(arr_delay, na.rm = TRUE) ) . delay %&gt;% head . A tibble: 6 × 4 destcountdistdelay . &lt;chr&gt;&lt;int&gt;&lt;dbl&gt;&lt;dbl&gt; . ABQ | 254 | 1826.0000 | 4.381890 | . ACK | 265 | 199.0000 | 4.852273 | . ALB | 439 | 143.0000 | 14.397129 | . ANC | 8 | 3370.0000 | -2.500000 | . ATL | 17215 | 757.1082 | 11.300113 | . AUS | 2439 | 1514.2530 | 6.019909 | . delay &lt;- filter(delay, count &gt; 20, dest != &quot;HNL&quot;) delay %&gt;% head . A tibble: 6 × 4 destcountdistdelay . &lt;chr&gt;&lt;int&gt;&lt;dbl&gt;&lt;dbl&gt; . ABQ | 254 | 1826.0000 | 4.381890 | . ACK | 265 | 199.0000 | 4.852273 | . ALB | 439 | 143.0000 | 14.397129 | . ATL | 17215 | 757.1082 | 11.300113 | . AUS | 2439 | 1514.2530 | 6.019909 | . AVL | 275 | 583.5818 | 8.003831 | . ggplot(data = delay, mapping = aes(x = dist, y = delay)) + geom_point(aes(size = count), alpha = 1/3) + geom_smooth(se = FALSE) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . delays &lt;- flights %&gt;% group_by(dest) %&gt;% summarize( count = n(), dist = mean(distance, na.rm = TRUE), delay = mean(arr_delay, na.rm = TRUE) ) %&gt;% filter(count &gt; 20, dest != &quot;HNL&quot;) . delays %&gt;% head . A tibble: 6 × 4 destcountdistdelay . &lt;chr&gt;&lt;int&gt;&lt;dbl&gt;&lt;dbl&gt; . ABQ | 254 | 1826.0000 | 4.381890 | . ACK | 265 | 199.0000 | 4.852273 | . ALB | 439 | 143.0000 | 14.397129 | . ATL | 17215 | 757.1082 | 11.300113 | . AUS | 2439 | 1514.2530 | 6.019909 | . AVL | 275 | 583.5818 | 8.003831 | . flights %&gt;% group_by(year, month, day) %&gt;% summarize(mean = mean(dep_delay, na.rm = TRUE)) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 4 yearmonthdaymean . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 11.548926 | . 2013 | 1 | 2 | 13.858824 | . 2013 | 1 | 3 | 10.987832 | . 2013 | 1 | 4 | 8.951595 | . 2013 | 1 | 5 | 5.732218 | . 2013 | 1 | 6 | 7.148014 | . not_cancelled &lt;- flights %&gt;% filter(!is.na(dep_delay), !is.na(arr_delay)) not_cancelled %&gt;% head . A tibble: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 227 | 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 160 | 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 183 | 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 116 | 762 | 6 | 0 | 2013-01-01 06:00:00 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 150 | 719 | 5 | 58 | 2013-01-01 05:00:00 | . not_cancelled %&gt;% group_by(year, month, day) %&gt;% summarize(mean = mean(dep_delay)) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 4 yearmonthdaymean . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 11.435620 | . 2013 | 1 | 2 | 13.677802 | . 2013 | 1 | 3 | 10.907778 | . 2013 | 1 | 4 | 8.965859 | . 2013 | 1 | 5 | 5.732218 | . 2013 | 1 | 6 | 7.145959 | . delays &lt;- not_cancelled %&gt;% group_by(tailnum) %&gt;% summarize( delay = mean(arr_delay) ) . delays %&gt;% head # tailnum : 비행기 등록번호 . A tibble: 6 × 2 tailnumdelay . &lt;chr&gt;&lt;dbl&gt; . D942DN | 31.500000 | . N0EGMQ | 9.982955 | . N10156 | 12.717241 | . N102UW | 2.937500 | . N103US | -6.934783 | . N104UW | 1.804348 | . geom_freqpoly : 요약된 수치 값들의 분포를 보여주는(알아서 구간 cut하고 histplot내주는) . ggplot(data = delays, mapping = aes(x = delay)) + geom_freqpoly(binwidth = 10) . 애초에 평균으로 요약된 데이터로 구한 plot으로 특정 한공기 종류는 도착 지연시간 평균이 300분을 넘어가는 것을 볼 수 있다. | . delays &lt;- not_cancelled %&gt;% group_by(tailnum) %&gt;% summarize( delay = mean(arr_delay, na.rm=TRUE), n = n() ) . delays %&gt;% head # n만 추가 . A tibble: 6 × 3 tailnumdelayn . &lt;chr&gt;&lt;dbl&gt;&lt;int&gt; . D942DN | 31.500000 | 4 | . N0EGMQ | 9.982955 | 352 | . N10156 | 12.717241 | 145 | . N102UW | 2.937500 | 48 | . N103US | -6.934783 | 46 | . N104UW | 1.804348 | 46 | . ggplot(data = delays, mapping = aes(x = n, y = delay)) + geom_point(alpha = 0.1) . 해석 : n은 해당 비행기 기종의 운행 횟수를 나타낸 것으로 운행횟수가 많이질수록 평균 지연시간의 변동폭이 적어짐을 알 수 있다.(평균이기에)반대로 평균 운행횟수가 적은 경우 변동폭이 비교적 더 큼. | . not_cancelled %&gt;% group_by(year, month, day) %&gt;% summarize( avg_delay1 = mean(arr_delay), avg_delay2 = mean(arr_delay[arr_delay &gt; 0]) ) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 5 yearmonthdayavg_delay1avg_delay2 . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 12.651023 | 32.48156 | . 2013 | 1 | 2 | 12.692888 | 32.02991 | . 2013 | 1 | 3 | 5.733333 | 27.66087 | . 2013 | 1 | 4 | -1.932819 | 28.30976 | . 2013 | 1 | 5 | -1.525802 | 22.55882 | . 2013 | 1 | 6 | 4.236429 | 24.37270 | . not_cancelled %&gt;% group_by(dest) %&gt;% summarize(distance_sd = sd(distance)) %&gt;% arrange(desc(distance_sd)) %&gt;% head . A tibble: 6 × 2 destdistance_sd . &lt;chr&gt;&lt;dbl&gt; . EGE | 10.542765 | . SAN | 10.350094 | . SFO | 10.216017 | . HNL | 10.004197 | . SEA | 9.977993 | . LAS | 9.907786 | . not_cancelled %&gt;% group_by(year, month, day) %&gt;% summarize( first = min(dep_time), last = max(dep_time) ) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 5 yearmonthdayfirstlast . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt; . 2013 | 1 | 1 | 517 | 2356 | . 2013 | 1 | 2 | 42 | 2354 | . 2013 | 1 | 3 | 32 | 2349 | . 2013 | 1 | 4 | 25 | 2358 | . 2013 | 1 | 5 | 14 | 2357 | . 2013 | 1 | 6 | 16 | 2355 | . range : 범위를 알려주는 함수 최솟값과 최댓값을 표시 . not_cancelled %&gt;% group_by(year, month, day) %&gt;% mutate(r = min_rank(desc(dep_time))) %&gt;% filter(r %in% range(r)) %&gt;% head . A grouped_df: 6 × 20 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hourr . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt;&lt;int&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | 831 | . 2013 | 1 | 1 | 2356 | 2359 | -3 | 425 | 437 | -12 | B6 | 727 | N588JB | JFK | BQN | 186 | 1576 | 23 | 59 | 2013-01-01 23:00:00 | 1 | . 2013 | 1 | 2 | 42 | 2359 | 43 | 518 | 442 | 36 | B6 | 707 | N580JB | JFK | SJU | 189 | 1598 | 23 | 59 | 2013-01-02 23:00:00 | 928 | . 2013 | 1 | 2 | 2354 | 2359 | -5 | 413 | 437 | -24 | B6 | 727 | N789JB | JFK | BQN | 180 | 1576 | 23 | 59 | 2013-01-02 23:00:00 | 1 | . 2013 | 1 | 3 | 32 | 2359 | 33 | 504 | 442 | 22 | B6 | 707 | N763JB | JFK | SJU | 193 | 1598 | 23 | 59 | 2013-01-03 23:00:00 | 900 | . 2013 | 1 | 3 | 2349 | 2359 | -10 | 434 | 445 | -11 | B6 | 739 | N729JB | JFK | PSE | 199 | 1617 | 23 | 59 | 2013-01-03 23:00:00 | 1 | . n_distinct : 유일값 개수 카운트 여기서는 각 도착지마다의 항공사의 종류 갯수를 나타냄 . not_cancelled %&gt;% group_by(dest) %&gt;% summarize(carriers = n_distinct(carrier)) %&gt;% arrange(desc(carriers)) %&gt;% head . A tibble: 6 × 2 destcarriers . &lt;chr&gt;&lt;int&gt; . ATL | 7 | . BOS | 7 | . CLT | 7 | . ORD | 7 | . TPA | 7 | . AUS | 6 | . - 이건 각 지역으로 가는 도착 총 항공편 수 . not_cancelled %&gt;% count(dest) %&gt;% head . A tibble: 6 × 2 destn . &lt;chr&gt;&lt;int&gt; . ABQ | 254 | . ACK | 264 | . ALB | 418 | . ANC | 8 | . ATL | 16837 | . AUS | 2411 | . - 해당 항공기가 비행한 총 마일 수 . wt : weight약자로 count()에서 사용시 가중 합을 의미 . not_cancelled %&gt;% count(tailnum, wt = distance) %&gt;% head . A tibble: 6 × 2 tailnumn . &lt;chr&gt;&lt;dbl&gt; . D942DN | 3418 | . N0EGMQ | 239143 | . N10156 | 109664 | . N102UW | 25722 | . N103US | 24619 | . N104UW | 24616 | . summarize()&#51032; sum&#44284; mean&#51032;&#48120; . - sum . not_cancelled %&gt;% group_by(year, month, day) %&gt;% summarize(n_early = sum(dep_time &lt; 500)) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 4 yearmonthdayn_early . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt; . 2013 | 1 | 1 | 0 | . 2013 | 1 | 2 | 3 | . 2013 | 1 | 3 | 4 | . 2013 | 1 | 4 | 3 | . 2013 | 1 | 5 | 3 | . 2013 | 1 | 6 | 2 | . 여기서 sum(x &gt; 10), mean(y == 0) 같은 거 사용하면 결과 값이 TRUE, FALSE로 나오기에 밑에 결과값처럼 summarize(sum()) 의 결과 값은 TRUE 의 합(개수)을 알려줌.summarize(mean())의 경우 비율을 알려줌. . - mean . not_cancelled %&gt;% group_by(year, month, day) %&gt;% summarize(hour_prop = mean(arr_delay &gt; 60)) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 4 yearmonthdayhour_prop . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 0.07220217 | . 2013 | 1 | 2 | 0.08512931 | . 2013 | 1 | 3 | 0.05666667 | . 2013 | 1 | 4 | 0.03964758 | . 2013 | 1 | 5 | 0.03486750 | . 2013 | 1 | 6 | 0.04704463 | . - day . daily &lt;- group_by(flights, year, month, day) (per_day &lt;- summarize(daily, flights = n())) %&gt;% head . `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using the `.groups` argument. . A grouped_df: 6 × 4 yearmonthdayflights . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt; . 2013 | 1 | 1 | 842 | . 2013 | 1 | 2 | 943 | . 2013 | 1 | 3 | 914 | . 2013 | 1 | 4 | 915 | . 2013 | 1 | 5 | 720 | . 2013 | 1 | 6 | 832 | . per_month &lt;- summarize(per_day, flights = sum(flights)) . `summarise()` has grouped output by &#39;year&#39;. You can override using the `.groups` argument. . 위의 경고문 grouping한거에 summarize를 또 씌울 때 나타나는 말이다. 바깥에()를 한번 씌워주면 뒤에서부터 변수 날리면서 통합시켜서 summarize해줌. 여기서는 day 날아감, 그리고 day의 한 단계 위인 해당 month로 통합 한번 더 한다면 month 날리고 그에 해당하는 영역(같은year)까지 통합시킨 결과 보여줌. . - month . (per_month &lt;- summarize(per_day, flights = sum(flights))) . `summarise()` has grouped output by &#39;year&#39;. You can override using the `.groups` argument. . A grouped_df: 12 × 3 yearmonthflights . &lt;int&gt;&lt;int&gt;&lt;int&gt; . 2013 | 1 | 27004 | . 2013 | 2 | 24951 | . 2013 | 3 | 28834 | . 2013 | 4 | 28330 | . 2013 | 5 | 28796 | . 2013 | 6 | 28243 | . 2013 | 7 | 29425 | . 2013 | 8 | 29327 | . 2013 | 9 | 27574 | . 2013 | 10 | 28889 | . 2013 | 11 | 27268 | . 2013 | 12 | 28135 | . - year . (per_year &lt;- summarize(per_month, flights = sum(flights))) . A tibble: 1 × 2 yearflights . &lt;int&gt;&lt;int&gt; . 2013 | 336776 | . - 주의 사항 . 이러한 점진적 요약할때 sum과 count는 괜찮으나 중앙값의 경우 그룹별 중앙값의 중앙값은 실제 전체 중앙값과 다르다. . ungroup : 그룹화 제거 . daily %&gt;% ungroup() %&gt;% # date 기반 그룹화 해제 summarize(flights = n()) #모든 항공편 . A tibble: 1 × 1 flights . &lt;int&gt; . 336776 | . 7. mutate&#47196; &#44536;&#47353;&#54868; &#50836;&#50557; . group_by는 summarize()에서 가장 유용하지만 mutate()와 filter()에서도 가능 | . flights_sml %&gt;% group_by(year, month, day) %&gt;% filter(rank(desc(arr_delay)) &lt; 10) %&gt;% head . A grouped_df: 6 × 7 yearmonthdaydep_delayarr_delaydistanceair_time . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt; . 2013 | 1 | 1 | 853 | 851 | 184 | 41 | . 2013 | 1 | 1 | 290 | 338 | 1134 | 213 | . 2013 | 1 | 1 | 260 | 263 | 266 | 46 | . 2013 | 1 | 1 | 157 | 174 | 213 | 60 | . 2013 | 1 | 1 | 216 | 222 | 708 | 121 | . 2013 | 1 | 1 | 255 | 250 | 589 | 115 | . popular_dests &lt;- flights %&gt;% group_by(dest) %&gt;% filter(n() &gt; 365) popular_dests %&gt;% head . A grouped_df: 6 × 19 yearmonthdaydep_timesched_dep_timedep_delayarr_timesched_arr_timearr_delaycarrierflighttailnumorigindestair_timedistancehourminutetime_hour . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;dbl&gt;&lt;chr&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;dttm&gt; . 2013 | 1 | 1 | 517 | 515 | 2 | 830 | 819 | 11 | UA | 1545 | N14228 | EWR | IAH | 227 | 1400 | 5 | 15 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 533 | 529 | 4 | 850 | 830 | 20 | UA | 1714 | N24211 | LGA | IAH | 227 | 1416 | 5 | 29 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 542 | 540 | 2 | 923 | 850 | 33 | AA | 1141 | N619AA | JFK | MIA | 160 | 1089 | 5 | 40 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 544 | 545 | -1 | 1004 | 1022 | -18 | B6 | 725 | N804JB | JFK | BQN | 183 | 1576 | 5 | 45 | 2013-01-01 05:00:00 | . 2013 | 1 | 1 | 554 | 600 | -6 | 812 | 837 | -25 | DL | 461 | N668DN | LGA | ATL | 116 | 762 | 6 | 0 | 2013-01-01 06:00:00 | . 2013 | 1 | 1 | 554 | 558 | -4 | 740 | 728 | 12 | UA | 1696 | N39463 | EWR | ORD | 150 | 719 | 5 | 58 | 2013-01-01 05:00:00 | . popular_dests %&gt;% filter(arr_delay &gt; 0) %&gt;% mutate(prop_delay = arr_delay / sum(arr_delay)) %&gt;% select(year:day, dest, arr_delay, prop_delay) %&gt;% head . A grouped_df: 6 × 6 yearmonthdaydestarr_delayprop_delay . &lt;int&gt;&lt;int&gt;&lt;int&gt;&lt;chr&gt;&lt;dbl&gt;&lt;dbl&gt; . 2013 | 1 | 1 | IAH | 11 | 1.106740e-04 | . 2013 | 1 | 1 | IAH | 20 | 2.012255e-04 | . 2013 | 1 | 1 | MIA | 33 | 2.350026e-04 | . 2013 | 1 | 1 | ORD | 12 | 4.239594e-05 | . 2013 | 1 | 1 | FLL | 19 | 9.377853e-05 | . 2013 | 1 | 1 | ORD | 8 | 2.826396e-05 | .",
            "url": "https://jjyun98.github.io/main/2022/07/10/%EB%8D%B0%EC%9D%B4%ED%84%B0_%EB%B3%80%ED%98%95.html",
            "relUrl": "/2022/07/10/%EB%8D%B0%EC%9D%B4%ED%84%B0_%EB%B3%80%ED%98%95.html",
            "date": " • Jul 10, 2022"
        }
        
    
  
    
        ,"post1": {
            "title": "ggplot in R",
            "content": "1&#51109; ggplot . library(&#39;tidyverse&#39;) . color . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y= hwy, color = class)) . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y= hwy, size = class)) . Warning message: “Using size for a discrete variable is not advised.” . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y = hwy, alpha = class)) . Warning message: “Using alpha for a discrete variable is not advised.” . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y = hwy, shape = class)) . Warning message: “The shape palette can deal with a maximum of 6 discrete values because more than 6 becomes difficult to discriminate; you have 7. Consider specifying shapes manually if you must have them.” Warning message: “Removed 62 rows containing missing values (geom_point).” . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y= hwy), color = &#39;blue&#39;) . facet_wrap . - 차 종류(class)에 따라 나눈 모습 nrow = 줄 개수 . ggplot(data = mpg) + geom_point(mapping = aes(x=displ, y=hwy)) + facet_wrap(~ class, nrow = 3) . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y= hwy)) + facet_grid(drv ~ cyl) . # ![Image](IMG_0393.jpg) . 깃헙 이미지는 올리법 따로 있음 그거 이용 . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y= hwy),shape =23) . facet_grid . facet grid에 적은 항목들의 결과 plot 보여줌 . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y =hwy)) + facet_grid(drv ~ cyl) . mpg %&gt;% head . A tibble: 6 × 11 manufacturermodeldisplyearcyltransdrvctyhwyflclass . &lt;chr&gt;&lt;chr&gt;&lt;dbl&gt;&lt;int&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt;&lt;int&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt; . audi | a4 | 1.8 | 1999 | 4 | auto(l5) | f | 18 | 29 | p | compact | . audi | a4 | 1.8 | 1999 | 4 | manual(m5) | f | 21 | 29 | p | compact | . audi | a4 | 2.0 | 2008 | 4 | manual(m6) | f | 20 | 31 | p | compact | . audi | a4 | 2.0 | 2008 | 4 | auto(av) | f | 21 | 30 | p | compact | . audi | a4 | 2.8 | 1999 | 6 | auto(l5) | f | 16 | 26 | p | compact | . audi | a4 | 2.8 | 1999 | 6 | manual(m5) | f | 18 | 26 | p | compact | . mpg$drv %&gt;% unique() . &lt;ol class=list-inline&gt;&#39;f&#39; | &#39;4&#39; | &#39;r&#39; | &lt;/ol&gt; mpg$cyl %&gt;% unique() . &lt;ol class=list-inline&gt;4 | 6 | 8 | 5 | &lt;/ol&gt; 열이나 행으로 면분할 하고싶지 않다면 변수이름 대신 . 사용 . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y =hwy)) + facet_grid(. ~ cyl) . cyl에 대한 내용만 나옴 . ggplot(data = mpg) + geom_point(mapping = aes(x= displ, y = hwy)) . geom_smooth . ggplot(data = mpg)+ geom_smooth(mapping = aes(x=displ, y= hwy)) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . 데이터에 적합된 평활선 . line자체의 shape은 선택 불가지만 line type 선택 해줄 수 있음 . ggplot(data = mpg)+ geom_smooth(mapping = aes(x=displ, y=hwy, linetype = drv)) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . 색깔 입히기 가능 . ggplot(data = mpg)+ geom_smooth(mapping = aes(x=displ, y=hwy, group = drv)) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . ggplot(data = mpg)+ geom_smooth(mapping = aes(x=displ, y=hwy, color = drv)) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . 다 합쳐서 그리기 . ggplot(data = mpg)+ geom_point(mapping = aes(x=displ, y=hwy,color = drv))+ geom_smooth(mapping = aes(x=displ, y=hwy, color = drv, linetype = drv)) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . &#53076;&#46300; &#51473;&#48373; &#54588;&#54616;&#44592; . ggplot안에 mapping 해 놓으면 다음번에 안써도 된다 . ggplot(data = mpg, mapping = aes(x= displ, y=hwy)) + geom_point() + geom_smooth() . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . mapping 해놓고 옵션추가 하고 싶다면 해당 geom에 가서 그 부분만 mapping하고 옵션주면 됨. . ggplot(data = mpg, mapping = aes(x= displ, y=hwy)) + geom_point(mapping = aes(color = class)) + geom_smooth() . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . filter &#49324;&#50857; . 해당 레이어에 한해서만 smooth 하기위해 filter 사용 se = FALSE하면 그림자 꺼짐 . ggplot(data = mpg, mapping = aes(x= displ, y=hwy)) + geom_point(mapping = aes(color = class)) + geom_smooth( data = filter(mpg, class == &#39;subcompact&#39;), se= FALSE ) . `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; . ggplot(data = diamonds) + geom_bar(mapping = aes(x= cut)) . ggplot(data = diamonds)+ stat_count(mapping = aes(x=cut)) . 이것을 보면 geom_bar의 y축의 default값이 stat_count임을 알 수 있다 이 stat을 다른 값을 주면 y축 종류를 바꿀 수 있음 . demo &lt;- tribble( ~cut, ~freq, &quot;Fair&quot;, 1610, &quot;Good&quot;, 4906, &quot;Very Good&quot;, 12082, &quot;Premium&quot;, 13791, &quot;Ideal&quot;, 21551 ) . demo . A tibble: 5 × 2 cutfreq . &lt;chr&gt;&lt;dbl&gt; . Fair | 1610 | . Good | 4906 | . Very Good | 12082 | . Premium | 13791 | . Ideal | 21551 | . ggplot(data = demo) + geom_bar(mapping = aes(x= cut,y=freq), stat = &#39;identity&#39;) . 비율로 표시하기 . ggplot(data = diamonds) + geom_bar( mapping = aes(x = cut, y = stat(prop), group =1) ) . stat_summary로 표현 . ggplot(data = diamonds) + stat_summary( mapping = aes(x = cut, y= depth), fun.ymin = min, fun.ymax = max, fun.y = median ) . Warning message: “`fun.y` is deprecated. Use `fun` instead.” Warning message: “`fun.ymin` is deprecated. Use `fun.min` instead.” Warning message: “`fun.ymax` is deprecated. Use `fun.max` instead.” . geom_bar에서 color 사용시 막대그래프의 테두리 색 선택 geom_bar에서 fill 사용시 막대그래프 자체 색 선택 . ggplot(data = diamonds) + geom_bar(mapping = aes(x= cut, color = cut)) ggplot(data = diamonds) + geom_bar(mapping = aes(x= cut, fill = cut)) . - 다른 변수 추가해서 각각 얼마나 차지하는지 보이기 . ggplot(data = diamonds) + geom_bar(mapping = aes(x= cut, fill = clarity)) . diamonds$clarity %&gt;% unique . &lt;ol class=list-inline&gt;SI2 | SI1 | VS1 | VS2 | VVS2 | VVS1 | I1 | IF | &lt;/ol&gt; &lt;summary style=display:list-item;cursor:pointer&gt; Levels: &lt;/summary&gt; &lt;ol class=list-inline&gt;&#39;I1&#39; | &#39;SI2&#39; | &#39;SI1&#39; | &#39;VS2&#39; | &#39;VS1&#39; | &#39;VVS2&#39; | &#39;VVS1&#39; | &#39;IF&#39; | &lt;/ol&gt; position = &#39;identity&#39; : 각 객체를 그래프 문맥에 해당되는 곳에 정확히 배치한다. 다만, 막대그래프에서는 그리 유용하지 않음 . ggplot( data = diamonds, mapping = aes(x = cut, fill = clarity) )+ geom_bar(alpha = 0.3, position = &#39;identity&#39;) . 테두리만 색입히고 막대를 빈공간으로 만드는 것도 가능 . ggplot( data = diamonds, mapping = aes(x = cut, color = clarity) )+ geom_bar(fill = NA, position = &#39;identity&#39;) . position = &#39;fill&#39; : 누적 막대인데 막대 높이를 동일하게 맞춤 비율 비교에 용이 . ggplot(data = diamonds) + geom_bar( mapping = aes(x =cut, fill = clarity), position = &#39;fill&#39; ) . position = &#39;dodge&#39; : 옆으로 쌓기 개별 값들의 비교 용이 . ggplot(data = diamonds) + geom_bar( mapping = aes(x =cut, fill = clarity), position = &#39;dodge&#39; ) . position = &#39;jitter&#39; : 중복된 값 진하게 표시 . ggplot(data = mpg) + geom_point( mapping = aes(x =displ, y=hwy), position = &#39;jitter&#39; ) . coord_flip() : x축 y축 변경 . ggplot(data = mpg, mapping = aes(x = class, y= hwy)) + geom_boxplot() ggplot(data = mpg, mapping = aes(x = class, y= hwy)) + geom_boxplot() + coord_flip() . maps : 위도, 경도 가져오는 library . library(&#39;maps&#39;) . nz &lt;- map_data(&#39;nz&#39;) . nz %&gt;% head . A data.frame: 6 × 6 longlatgrouporderregionsubregion . &lt;dbl&gt;&lt;dbl&gt;&lt;dbl&gt;&lt;int&gt;&lt;chr&gt;&lt;chr&gt; . 1172.7433 | -34.44215 | 1 | 1 | North.Island | NA | . 2172.7983 | -34.45562 | 1 | 2 | North.Island | NA | . 3172.8528 | -34.44846 | 1 | 3 | North.Island | NA | . 4172.8986 | -34.41786 | 1 | 4 | North.Island | NA | . 5172.9593 | -34.42503 | 1 | 5 | North.Island | NA | . 6173.0184 | -34.39895 | 1 | 6 | North.Island | NA | . ggplot(nz, aes(long, lat, group = group)) + geom_polygon(fill = &#39;white&#39;, color = &#39;black&#39;) . coord_quickmap() : 지도에 맞게 가로세로 비율 설정 공간 데이터 plot에서 중요 . ggplot(nz, aes(long, lat, group = group)) + geom_polygon(fill = &#39;white&#39;, color = &#39;black&#39;) + coord_quickmap() . labs : NULL하면 x축이나 y축 이름 안보이게 함 theme(aspect.ratio) : 1이면 정사각형 모양, 그 이상은 세로 길어짐, 이하는 가로가 길어짐 width : 막대 뚱뚱한 정도 show.legend : 범주 표기 여부 . bar &lt;- ggplot(data = diamonds) + geom_bar( mapping = aes(x = cut, fill = cut), show.legend = FALSE, width = 1 ) + theme(aspect.ratio = 1)+ labs(x = NULL, y = NULL) bar + coord_flip() . coord_polar() : pie 차트로 변경 . bar + coord_polar() . 2&#51109; . this .",
            "url": "https://jjyun98.github.io/main/2022/07/10/ggplot_%ED%95%99%EC%8A%B5.html",
            "relUrl": "/2022/07/10/ggplot_%ED%95%99%EC%8A%B5.html",
            "date": " • Jul 10, 2022"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "This website is powered by fastpages 1. . a blogging platform that natively supports Jupyter notebooks in addition to other formats. &#8617; . |",
          "url": "https://jjyun98.github.io/main/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page10": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://jjyun98.github.io/main/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}